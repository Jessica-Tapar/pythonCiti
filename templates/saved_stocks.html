<!DOCTYPE html>
<html>
<head>
    <title>Python Values in HTML Table</title>
<!--    <link rel="stylesheet" href="{{ url_for('static', filename='table.css') }}">-->

</head>
<style>

    h1{
        padding: 60px;
        text-align: center;
        background: #071952;
        color: white;
        font-size: 30px;
        font-family: Arial, Helvetica, sans-serif;
      }

    .navbar{
  position: relative;
    left: 1200px;
  height: 60px;
}
    /* Style for the navigation bar */
    ul.navbar {
      list-style-type: none;
      margin: 0;
      padding: 0;
      background-color: #071952;
      overflow: hidden;
      height: 60px;
    }

    ul.navbar li {
      float: right;
      height: 60px;
    }

    ul.navbar li a {
      display: block;
      color: white;
      text-align: center;
      padding: 14px 16px;
      text-decoration: none;
      height: 60px;
    }

    /* Style for the navigation bar links on hover */
    ul.navbar li a:hover {
      background-color: #111;
      height: 60px;
    }

    .intro{
      width: 890px;
      position: relative;
      top: -4PX;
      left: 360px;
      font-size: 25px;
    }

    .navigation-bar {
      background-image: url('download.jpeg');
      background-repeat: no-repeat;
      background-size: contain; /* Adjust the image size to fit the navigation bar */
      background-position: left center; /* Align the logo to the left side of the navigation bar */
  }

  .navigation-bar {
    background-color: #071952;
    height: 60px;
    display: flex;
    align-items: center;
    padding: 0 20px;
}

#comparisonTable {
    font-family: Arial, Helvetica, sans-serif;
    border-collapse: collapse;
    margin-left: auto;
    margin-right: auto;
    width: 75%;
  }

  #comparisonTable td, #comparisonTable th {
    border: 2px solid #ddd;
    padding: 8px;
  }

  #comparisonTable tr:hover {background-color: #ddd;}

  #comparisonTable th {
    padding-top: 12px;
    padding-bottom: 12px;
    text-align: left;
    background-color: #071952;
    color: white;
    border: 2px solid black;
  }





</style>
<body>
    <h1>NSE BSE RECOMMENDATION SYSTEM</h1>

    <div>

        <div>
    <nav class="navigation-bar">
      <ul class="navbar">
        <li><a href="Login.html">Exit</a></li>
        <li><a href="FAQ.html">FAQ</a></li>
        <li><a href="history.html">History</a></li>
        <li><a href="main.html">Home</a></li>
      </ul>
  </nav>

  </div>
  <div class ="intro">
    <p>Our recommendation system is designed to provide valuable insights and guidance for making informed investment decisions in the National Stock Exchange (NSE) and Bombay Stock Exchange (BSE). We understand that navigating the stock market can be overwhelming, which is why our platform aims to simplify the process and assist you in making well-informed choices.</p>
  </div>

        <label for="filterCompany">Filter by Company:</label>
    <input type="text" id="filterCompany" onkeyup="filterTable()">

    <label for="filterBuy">Filter by Suggested Buy:</label>
    <input type="text" id="filterBuy" onkeyup="filterTable()">

         <label for="filterSell">Filter by Suggested Sell:</label>
    <input type="text" id="filterSell" onkeyup="filterTable()">
     <table border="1" id="comparisonTable">
          <thead>
      <tr>
        <th>Company</th>
        <th>NSE</th>
        <th>BSE</th>
        <th>Suggest Buy</th>
        <th>Suggest Sell</th>
          <th>profit</th>
          <th>Date</th>
          <th>Save in History</th>

      </tr>
    </thead>
         <tbody>
        {% for row in data %}
        <tr>
            {% for value in row %}
            <td>{{ value }}</td>
            {% endfor %}
            <td><button onclick="saveRow(this)">Save</button></td>
        </tr>
        {% endfor %}
         </tbody>
    </table>
    </div>
    <br/>
    <button id="button"><a href="http://127.0.0.1:5000/saved_stocks">Saved Stocks</a></button>
<!--    <h2>Saved Rows</h2>-->
<!--    <div>-->
<!--     <table border="1" id="savedTable">-->
<!--          <thead>-->
<!--            <tr>-->
<!--              <th>Company</th>-->
<!--                <th>NSE</th>-->
<!--                <th>BSE</th>-->
<!--                <th>Suggest Buy</th>-->
<!--                <th>Suggest Sell</th>-->
<!--                <th>Arbitrage</th>-->
<!--                <th>Date</th>-->
<!--            </tr>-->
<!--          </thead>-->
<!--          <tbody>-->
<!--            &lt;!&ndash; This is where saved rows will be appended &ndash;&gt;-->
<!--            -->
<!--          </tbody>-->
<!--    </table>-->
<!--    </div>-->

<script>
        function saveRow(button) {
    const row = button.closest('tr');
    const cells = row.getElementsByTagName('td');
    const rowData = {
        company: cells[0].textContent,
        nse: cells[1].textContent,
        bse: cells[2].textContent,
        suggestBuy: cells[3].textContent,
        suggestSell: cells[4].textContent,
        arbitrage: cells[5].textContent,
        date: cells[6].textContent
    };

    fetch('/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(rowData)
    })
    .then(response => response.json())
    .then(result => {
        if (result.success) {
            // If successful, add the saved row to the savedTable
            const savedRow = document.createElement('tr');
            for (const key in rowData) {
                const cell = document.createElement('td');
                cell.textContent = rowData[key];
                savedRow.appendChild(cell);
            }
            document.querySelector('#savedTable tbody').appendChild(savedRow);
        } else {
            // Handle error if needed
            console.error('Error:', result.message);
        }
    })
    .catch(error => console.error('Error:', error));


        }

        function filterTable() {
            const inputCompany = document.getElementById("filterCompany");
            const inputBuy = document.getElementById("filterBuy");
            const inputSell = document.getElementById("filterSell");
            const filterValueCompany = inputCompany.value.toUpperCase();
            const filterValueBuy = inputBuy.value.toUpperCase();
             const filterValueSell = inputSell.value.toUpperCase();


            const table = document.getElementById("comparisonTable");
            const rows = table.getElementsByTagName("tr");

            for (let i = 1; i < rows.length; i++) {
                const cells = rows[i].getElementsByTagName("td");
                if (cells) {
                    const companyText = cells[0].textContent || cells[0].innerText;
                    const buyText = cells[3].textContent || cells[3].innerText;
                    const sellText = cells[4].textContent || cells[4].innerText;
                    const matchCompany = companyText.toUpperCase().indexOf(filterValueCompany) > -1;
                    const matchBuy = buyText.toUpperCase().indexOf(filterValueBuy) > -1;
                     const matchSell = sellText.toUpperCase().indexOf(filterValueSell) > -1;
                    rows[i].style.display = matchCompany && matchBuy && matchSell? "" : "none";
                }
            }
        }

    </script>
</body>
</html>